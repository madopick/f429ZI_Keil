/*
 * data.c
 *
 *  Created on: Mar 23, 2022
 *      Author: pudja
 */

#include "data.h"

/* @formatter:off */
const uint8_t u8_curvefitCompare[TX_LEN][RX_LEN] = {
  { 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 },
  { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 },
  { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 },
  { 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 },
  { 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1 },
  { 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1 },
  { 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1 },
  { 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 },
  { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 },
  { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1 },
  { 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1 },
  { 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1 },
  { 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1 },
  { 0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 },
  { 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 },
  { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 },
};

const int16_t s16_reconstructed[TX_LEN][RX_LEN] = {
  { -291.1, -244.137931, -201.5357143, -158.0833333, -112.9615385, -92.73666667, -48.61011905, -18.88043478, -5.994949495, 7.25952381, 26.35227273, 53.96710526, 69.86538462, 71.23109244, 86.00416667, 104.4520833, 115.0021008, 122.4935897, 142.4802632, 135.3272727, 138.547619, 131.8585859, 139.3532609, 152.8660714, 148.65, 154.5346154, 127.9027778, 117.9285714, 101.6896552, 66.4 },
  { 130.5666667, 109.5689655, 101.6190476, 71.10648148, 52.77307692, 38.56, 20.06547619, 19.9375, 8.618686869, -4.973809524, -9.356818182, -20.89473684, -23.15811966, -40.26890756, -43.2375, -44.66041667, -57.10294118, -55.42307692, -54.05701754, -72.45227273, -61.37380952, -68.91919192, -78.0923913, -65.70535714, -70.89666667, -62.45, -62.06018519, -54.0952381, -44.98275862, -30.43333333 },
  { 142.1, 115.5, 96, 77.59722222, 53.27307692, 33.28333333, 32.2827381, 19.98097826, 11.02272727, -12.64285714, -22.21363636, -23.66447368, -25.63461538, -50.19957983, -35.53541667, -55.13958333, -54.82563025, -59.73717949, -62.13815789, -59.07272727, -78.6952381, -68.99747475, -65.29076087, -81.41666667, -74.55333333, -75.01153846, -65.94907407, -63.49404762, -42.07758621, -26.9 },
  { -158.4833333, -139.1982759, -102.2142857, -46.24537037, 14.77692308, -14.62, -26.49702381, -24.55706522, -21.90909091, -0.726190476, 23.44545455, 29.66008772, 25.80769231, 42.67857143, 48.33333333, 57.325, 52.22058824, 55.20940171, 63.41885965, 81.85681818, 71.89047619, 66.03535354, 74.08423913, 49.6875, 38.05333333, 56.96153846, 67.75462963, 62.07142857, 54.56034483, 37.51666667 },
  { 208.75, 167.1982759, 170.8333333, 444.6018519, 665.9192308, 351.2366667, -3.666666667, -62.77173913, -69.11868687, -70.80238095, -79.60909091, -86.36184211, -95.57692308, -95.45168067, -102.225, -103.15, -103.8844538, -97.47863248, -105.0811404, -105.3681818, -105.9119048, -90.94949495, -120.2853261, -276, -437.87, -305.5153846, -145.1805556, -112.5, -84.02586207, -58.75 },
  { -183.7833333, -149.6206897, -52.44642857, 487.1851852, 740.35, 464.5566667, -98.24404762, -147.5570652, -107.4949495, -93.2452381, -68.25909091, -52.26754386, -29.40384615, -5.157563025, 5.3375, 10.03333333, 42.98109244, 46.38675214, 56.15789474, 63.80227273, 80.26190476, 98.36111111, 62.07608696, -223.4761905, -375.6233333, -249.3846154, 2.041666667, 42.61309524, 26.65517241, 12.71666667 },
  { 87.05, 61.55172414, 95.58928571, 389.9444444, 609.9807692, 302.6433333, -24.01190476, -76.60597826, -61.6969697, -69.45, -65.49545455, -63.97807018, -56.86111111, -52.57563025, -50.88125, -61.3, -67.34243697, -54.38247863, -47.3377193, -42.17727273, -36.78333333, -45.57070707, -55.16576087, -217.3363095, -370.7933333, -250.3038462, -88.18518519, -59.08333333, -54.80172414, -31.95 },
  { -3.15, -4.75862069, 8.589285714, 43.34722222, 85.45384615, 32.99333333, 0.514880952, -9.244565217, -16.1489899, 0.561904762, -1.329545455, -9.010964912, 1.555555556, -9.207983193, 1.2625, 1.0625, -3.006302521, -8.081196581, -3.515350877, 1.118181818, 7.854761905, -5.603535354, -6.717391304, -29.38392857, -44.68, -32.42307692, -14.48611111, -0.607142857, 1.112068966, 0.35 },
  { -41.45, -25.62931034, -34.5, -23.95833333, -18.3, -4.33, -9.089285714, -5.845108696, -4.358585859, 1.073809524, 5.618181818, 10.26754386, 17.92521368, 11.26260504, 22.16666667, 18.71458333, 11.5210084, 20.88461538, 19.76973684, 17.78863636, 16.84761905, 19.88131313, 21.17934783, 14.86011905, 13.22666667, 24.28846154, 19.91666667, 25.5, 10.93965517, 4.05 },
  { 131.3833333, 119.4137931, 85.70833333, 47.27777778, 7.042307692, 17.74, 33.6577381, 19.04619565, 6.116161616, -1.404761905, -16.94772727, -30.85745614, -34.56410256, -43.54201681, -46.17291667, -48.24791667, -63.31932773, -69.21153846, -66.87719298, -76.65454545, -79.3547619, -71.01262626, -72.78804348, -24.42857143, 22.31666667, -35.66153846, -56.375, -59.29166667, -43.20689655, -31.61666667 },
  { -263.5166667, -219.3534483, -202.9047619, -312.7314815, -417.4346154, -226.11, -43.69047619, -16.73369565, -7.840909091, 20.89761905, 29.77727273, 31.30921053, 50.26068376, 54.57563025, 58.66458333, 63.33333333, 66.50630252, 57.34401709, 55.90789474, 64.99318182, 59.29047619, 39.12121212, 91.4048913, 415.8333333, 725.8833333, 468.8807692, 144.0277778, 83.94047619, 66.73275862, 43.48333333 },
  { 26.65, 13.31896552, -45.28571429, -298.0694444, -418.5461538, -281.4633333, 2.101190476, 30.31793478, 12.83333333, 1.55, -6.981818182, -17.89473684, -36.22435897, -34.24789916, -53.72291667, -54.19583333, -80.4012605, -88.13675214, -106.7214912, -97.73181818, -112.6404762, -128.1388889, -50.26630435, 508.5595238, 822.3833333, 569.5730769, 43.90740741, -47.13095238, -39.3362069, -35.85 },
  { 123.4666667, 111.2241379, 65.55952381, -102.6527778, -255.9961538, -124.8433333, 24.30059524, 25.51358696, 20.18939394, 0.816666667, -16.35227273, -37.32675439, -43.05769231, -54.94747899, -59.52708333, -71.38333333, -89.68067227, -103.0149573, -106.6995614, -126.1181818, -124.8571429, -146.7171717, -106.0217391, 230.5357143, 519.6333333, 258.8961538, -33.04166667, -83.36904762, -56.62068966, -46.03333333 },
  { 229.2666667, 198.9224138, 150.7321429, 98.26851852, 49.94615385, 41.95, 41.89583333, 29.77717391, 2.560606061, -12.81190476, -27.98409091, -48.65350877, -50.75213675, -64.20588235, -69.60833333, -96.95208333, -89.19537815, -96.58547009, -107.5745614, -119.3818182, -114.6095238, -113.3964646, -120.7527174, -75.5327381, -26.59, -75.83461538, -95.34722222, -103.2261905, -88.12068966, -54.73333333 },
  { 257.9666667, 215.862069, 167.3452381, 144.5972222, 110.2807692, 69.78333333, 45.47321429, 21.92663043, 1.174242424, -15.77619048, -34.60454545, -46.59649123, -54.62820513, -63.44327731, -77.79375, -100.5854167, -110.6113445, -102.0106838, -109.5065789, -123.5613636, -111.25, -130.4671717, -122.6929348, -128.1220238, -128.91, -128.0923077, -125.1111111, -108.9940476, -92.07758621, -52.03333333 },
  { 47.81666667, 36.71551724, 39.5952381, 27.875, 26.38461538, 15.44666667, 5.550595238, -3.45923913, -6.005050505, -1.25, -3.513636364, -4.967105263, -16.17094017, -8.195378151, -7.141666667, -16.81875, -16.93697479, -28.83119658, -21.56578947, -28.94545455, -12.25, -33.27020202, -14.09782609, -32.40178571, -17.58666667, -32.40384615, -31.25, -17.2797619, -18.9137931, -6.683333333 },
};

const float f32_curvefitLineRef[TX_LEN][RX_LEN] = {
  { -251.5999008, -215.3770855, -180.8980888, -148.1629108, -117.1715515, -87.92401078, -60.42028875, -34.66038537, -10.64430065, 11.62796542, 32.15641283, 50.94104158, 67.98185168, 83.27884312, 96.83201591, 108.64137, 118.7069055, 127.0286223, 133.6065205, 138.4406, 141.5308609, 142.8773031, 142.4799266, 140.3387315, 136.4537178, 130.8248853, 123.4522343, 114.3357645, 103.4754762, 90.87136911 },
  { 126.56145, 108.6319705, 91.57212191, 75.38190421, 60.0613174, 45.61036149, 32.02903648, 19.31734235, 7.475279124, -3.49715321, -13.59995465, -22.8331252, -31.19666485, -38.69057361, -45.31485147, -51.06949844, -55.95451452, -59.9698997, -63.11565399, -65.39177738, -66.79826988, -67.33513149, -67.0023622, -65.79996201, -63.72793094, -60.78626897, -56.9749761, -52.29405234, -46.74349769, -40.32331214 },
  { 132.5196383, 113.5012992, 95.41282189, 78.25420637, 62.02545263, 46.72656068, 32.35753052, 18.91836214, 6.409055559, -5.17038924, -15.81997225, -25.53969347, -34.32955291, -42.18955056, -49.11968642, -55.11996049, -60.19037277, -64.33092327, -67.54161198, -69.8224389, -71.17340403, -71.59450738, -71.08574893, -69.6471287, -67.27864669, -63.98030288, -59.75209729, -54.59402991, -48.50610074, -41.48830978 },
  { -144.7053678, -124.3718002, -105.046251, -86.72872021, -69.41920783, -53.11771384, -37.82423826, -23.53878108, -10.2613423, 2.00807808, 13.26948006, 23.52286363, 32.76822881, 41.00557558, 48.23490396, 54.45621393, 59.6695055, 63.87477867, 67.07203343, 69.2612698, 70.44248776, 70.61568733, 69.78086849, 67.93803125, 65.08717561, 61.22830157, 56.36140913, 50.48649828, 43.60356904, 35.71262139 },
  { 152.3850994, 124.8135794, 98.69246765, 74.02176402, 50.80146855, 29.03158123, 8.712102057, -10.15696896, -27.57563182, -43.54388653, -58.06173308, -71.12917148, -82.74620173, -92.91282383, -101.6290378, -108.8948436, -114.7102412, -119.0752307, -121.989812, -123.4539852, -123.4677502, -122.0311071, -119.1440558, -114.8065963, -109.0187287, -101.780453, -93.09176908, -82.95267703, -71.36317682, -58.32326846 },
  { -245.242712, -220.6544967, -197.115973, -174.6271408, -153.1880001, -132.7985509, -113.4587932, -95.16872698, -77.92835232, -61.73766916, -46.59667752, -32.50537738, -19.46376876, -7.471851646, 3.470373955, 13.36290805, 22.20575062, 29.99890169, 36.74236125, 42.4361293, 47.08020583, 50.67459086, 53.21928437, 54.71428637, 55.15959686, 54.55521584, 52.90114331, 50.19737927, 46.44392372, 41.64077665 },
  { 60.98423071, 47.49967864, 34.76036707, 22.76629598, 11.51746539, 1.013875284, -8.744474329, -17.75758345, -26.02545209, -33.54808023, -40.32546788, -46.35761504, -51.64452171, -56.18618789, -59.98261358, -63.03379879, -65.3397435, -66.90044772, -67.71591144, -67.78613468, -67.11111743, -65.69085969, -63.52536146, -60.61462274, -56.95864352, -52.55742382, -47.41096363, -41.51926295, -34.88232177, -27.50014011 },
  { 8.603205045, 7.362447268, 6.159683366, 4.994913337, 3.868137184, 2.779354904, 1.7285665, 0.715771969, -0.259028687, -1.195835469, -2.094648376, -2.955467409, -3.778292567, -4.563123851, -5.30996126, -6.018804795, -6.689654456, -7.322510242, -7.917372154, -8.474240192, -8.993114355, -9.473994643, -9.916881057, -10.3217736, -10.68867226, -11.01757705, -11.30848797, -11.56140501, -11.77632818, -11.95325747 },
  { -38.51443584, -32.79277949, -27.36010482, -22.21641182, -17.36170051, -12.79597087, -8.519222909, -4.531456625, -0.832672019, 2.57713091, 5.697952162, 8.529791736, 11.07264963, 13.32652585, 15.29142039, 16.96733326, 18.35426445, 19.45221395, 20.26118179, 20.78116794, 21.01217242, 20.95419522, 20.60723634, 19.97129579, 19.04637355, 17.83246964, 16.32958406, 14.53771679, 12.45686785, 10.08703723 },
  { 116.6114379, 98.77389491, 81.84096824, 65.81265789, 50.68896386, 36.46988613, 23.15542472, 10.74557962, -0.75964917, -11.36026165, -21.05625781, -29.84763766, -37.7344012, -44.71654842, -50.79407933, -55.96699393, -60.23529222, -63.5989742, -66.05803986, -67.61248921, -68.26232225, -68.00753897, -66.84813939, -64.78412349, -61.81549127, -57.94224275, -53.16437791, -47.48189676, -40.8947993, -33.40308553 },
  { -103.348938, -87.19124769, -71.81408027, -57.21743576, -43.40131415, -30.36571544, -18.11063965, -6.63608675, 4.05794324, 13.97145033, 23.10443451, 31.45689578, 39.02883416, 45.82024962, 51.83114219, 57.06151185, 61.5113586, 65.18068245, 68.06948339, 70.17776143, 71.50551657, 72.0527488, 71.81945813, 70.80564455, 69.01130807, 66.43644868, 63.08106639, 58.9451612, 54.0287331, 48.33178209 },
  { 76.48209777, 63.04172183, 50.23309313, 38.05621168, 26.51107747, 15.5976905, 5.316050778, -4.333841703, -13.35198694, -21.73838493, -29.49303568, -36.61593919, -43.10709545, -48.96650447, -54.19416625, -58.79008078, -62.75424807, -66.08666811, -68.78734092, -70.85626647, -72.29344479, -73.09887586, -73.27255969, -72.81449627, -71.72468561, -70.00312771, -67.64982256, -64.66477017, -61.04797054, -56.79942366 },
  { 148.1292063, 125.2040079, 103.3833846, 82.66733635, 63.05586321, 44.54896515, 27.14664219, 10.84889431, -4.344278468, -18.43287616, -31.41689876, -43.29634627, -54.07121869, -63.74151603, -72.30723827, -79.76838542, -86.12495747, -91.37695444, -95.52437632, -98.56722311, -100.5054948, -101.3391914, -101.0683129, -99.69285936, -97.21283069, -93.62822694, -88.93904809, -83.14529416, -76.24696513, -68.24406102 },
  { 190.2266933, 161.8586051, 134.9144224, 109.3941453, 85.29777359, 62.62530742, 41.37674675, 21.55209158, 3.151341912, -13.82550225, -29.37844092, -43.50747408, -56.21260174, -67.49382389, -77.35114054, -85.7845517, -92.79405735, -98.37965749, -102.5413521, -105.2791413, -106.5930249, -106.4830031, -104.9490757, -101.9912428, -97.60950446, -91.80386059, -84.57431121, -75.92085634, -65.84349596, -54.34223008 },
  { 226.1462168, 193.552687, 162.5372878, 133.1000192, 105.2408811, 78.95987361, 54.2569967, 31.13225037, 9.585634617, -10.38285056, -28.77320515, -45.58542916, -60.8195226, -74.47548546, -86.55331774, -97.05301944, -105.9745906, -113.3180311, -119.0833411, -123.2705205, -125.8795693, -126.9104875, -126.3632751, -124.2379322, -120.5344587, -115.2528546, -108.39312, -99.95525471, -89.93925889, -78.34513248 },
  { 45.92141106, 39.38031398, 33.15625651, 27.24923864, 21.65926038, 16.38632172, 11.43042267, 6.791563226, 2.469743388, -1.535036843, -5.222777469, -8.593478488, -11.6471399, -14.38376171, -16.80334391, -18.9058865, -20.69138949, -22.15985288, -23.31127665, -24.14566082, -24.66300539, -24.86331034, -24.7465757, -24.31280144, -23.56198758, -22.49413411, -21.10924104, -19.40730836, -17.38833608, -15.05232419 },
};
/* @formatter:on */

uint64_t u64Func_GetBitmap(const uint8_t *u8p_curfitComp, uint8_t u8_len)
{
  uint64_t u64_bitmap = 0xFFFFFFFFFFFFFFFF;
  uint8_t u8_deny;

  for (uint8_t u8_i = 0; u8_i < u8_len; u8_i++)
  {
    u8_deny = u8p_curfitComp[u8_i] == 0;
    u64_bitmap &= ~(u8_deny << u8_i);
  }

  return (u64_bitmap);
}

void vFunc_ConvertS16toFloat(const int16_t *s16p_src, float *f32p_dst, uint8_t u8_len)
{
  for (uint8_t u8_i = 0; u8_i < u8_len; u8_i++)
    f32p_dst[u8_i] = (float) s16p_src[u8_i];
}
